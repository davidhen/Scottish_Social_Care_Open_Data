---
title: "Exploratory data analysis - 2010 social care data"
author: "David Henderson"
date: 2018-02-03
output: html_document
---

<!-- The file analysis/chunks.R contains chunks that define default settings
shared across the workflowr files. -->
```{r read-chunk, include=FALSE, cache=FALSE}
knitr::read_chunk("chunks.R")
```

<!-- Update knitr chunk options -->
```{r knitr-opts-chunk, include=FALSE}
```

<!-- Insert the date the file was last updated -->
```{r last-updated, echo=FALSE, results='asis'}
```

<!-- Insert the code version (Git commit SHA1) if Git repository exists and R
 package git2r is installed -->
```{r code-version, echo=FALSE, results='asis'}
```

<!-- Add your analysis here -->

#Introduction

On this page I will explore the 2010 social care data using the `soc_care10` object created in [import and tidy the data](http://davidhen.com/Scottish_Social_Care_Open_Data/01_import_and_tidy.html). 

##Aims

* Use the `skimr` package to explore descriptive stats of the dataset.
* Visualise important relationships

##Load required packages

```{r packages, message=FALSE, Warning=FALSE, cache=FALSE}
library(dplyr)
library(magrittr)
library(ggplot2)
library(cowplot)
library(skimr)
```

##Load in data

The data object `soc_care10` was created in the [import and tidy the data](http://davidhen.com/Scottish_Social_Care_Open_Data/01_import_and_tidy.html) analysis. I'll load the results of that into memory now. This is the cleaned dataset for that year. 

```{r load_data}
load("/GitHub/Scottish_Social_Care_Open_Data/output/clean_data/soc_care10.RData")
```

#Descriptive statistics

##Skim

First look at the descriptives

```{r skim_2010, results='asis'}
soc_care10 %>% skim %>% kable
```

Lots of really interesting information here. Working from the top down:

* `r nrow(soc_care10)` observations in total
* There are duplicated id values - same individuals or an error in assigning values to individuals?
* `r (sum(is.na(soc_care10$age_grp))/nrow(soc_care10)) * 100`% of observations of `age-grp` are missing. The vast majority of individuals are over 65 years of age. In fact over half of individuals are over 75. 
* `r (sum(is.na(soc_care10$client_grp))/nrow(soc_care10)) * 100`% of observation of `client_grp` are missing. The highest number of observation for this variable are for those designated "Infirmity due to age" and "Physical Disability"
* `council` data is well completed. unsurprisingly the most observations come from Glasgow city council.
* `r (soc_care10$gender %>% is.na %>% sum)/nrow(soc_care10) * 100`% of observations of `gender` are missing (very similar to the proportion of `age_grp` that are missing). A big skew towards female gender in the dataset.
* `hc_client` gives us a quick count of the number of people the do or do not receive home care. Presumably the `r soc_care10 %>% filter(hc_client == "No") %>% nrow` observations that did not receive home care only received housing support, laundry, or shopping services. The other potential option is that they received telecare only but we have no data on that sort of service for this dataset (there is in 2011 and 2012 datasets).







## Session information

<!-- Insert the session information into the document -->
```{r session-info}
```
